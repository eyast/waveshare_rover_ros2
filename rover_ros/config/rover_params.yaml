# =============================================================================
# PyRover ROS2 Parameters
# =============================================================================
# Copy this file to your workspace and customize as needed.
#
# Usage:
#   ros2 launch rover_ros bringup.launch.py config:=/path/to/my_params.yaml
# =============================================================================

# =============================================================================
# Rover Controller Node
# =============================================================================
rover_controller:
  ros__parameters:
    # Serial connection
    port: "/dev/serial0"
    baudrate: 115200
    
    # Motor control
    max_speed: 255           # Maximum PWM value (0-255)
    linear_gain: 200.0       # Converts m/s to PWM (tune with calibration)
    angular_gain: 100.0      # Converts rad/s to PWM (tune with calibration)
    
    # Sensor publishing
    publish_imu: true
    publish_battery: true
    
    # Frame IDs
    frame_id: "base_link"
    
    # Battery configuration
    battery_cells: 3         # Number of LiPo cells (3S = 3)
    battery_capacity_mah: 5200


# =============================================================================
# Pose Estimator Node
# =============================================================================
pose_estimator:
  ros__parameters:
    # Localization mode: 'dead_reckoning', 'imu', or 'fused'
    localization_mode: "fused"
    
    # Fusion weight (0.0 = pure dead reckoning, 1.0 = pure IMU)
    fusion_alpha: 0.7
    
    # Update rate
    publish_rate: 20.0
    
    # TF publishing
    publish_tf: true
    frame_id: "base_link"
    odom_frame_id: "odom"
    
    # RViz visualization
    publish_marker: true
    arrow_scale: 0.3


# =============================================================================
# Notes
# =============================================================================
#
# Motor Calibration:
#   Run `pyrover-calibrate-motors` to determine linear_gain and angular_gain.
#   These values convert velocity commands (m/s, rad/s) to PWM values (0-255).
#
# Localization Modes:
#   - dead_reckoning: Integrates cmd_vel only. Drifts over time.
#   - imu: Uses IMU for heading, cmd_vel for position. Better heading accuracy.
#   - fused: Blends DR and IMU with configurable weight. Recommended.
#
# Battery Configuration:
#   - 2S LiPo: 7.4V nominal, 8.4V full, 6.0V empty
#   - 3S LiPo: 11.1V nominal, 12.6V full, 9.0V empty
#   - 4S LiPo: 14.8V nominal, 16.8V full, 12.0V empty
#